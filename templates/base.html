{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>{% block title %}A file converter by Hakez Labs{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="{% static 'css/styles.css' %}"> -->

    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v7.0.0/css/all.css"
    />

     <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>

        <!-- Tailwind Config -->
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#137fec",
              "background-light": "#f6f7f8",
              "background-dark": "#101922",
            },
            fontFamily: {
              display: ["Inter", "sans-serif"],
              sans: ["Inter", "sans-serif"], 
            },
          },
        },
      };
    </script>

     <!-- Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"
      rel="stylesheet"
    />


    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>

    {% block stylesheets %}
    <!-- Additional stylesheets can be included here -->
    {% endblock %}
</head>
<body class="bg-stone-100 dark:bg-gray-800">

<header
    class="bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm sticky top-0 z-20 border-b border-primary/20 dark:border-primary/30">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex h-16 items-center justify-between">
            
            <div class="flex items-center gap-3">
            
                    <img src="{% static 'images/logo_light.png' %}" 
                        alt="Hakez Labs Logo" 
                        class="h-auto w-40 object-contain block dark:hidden" />

                    <img src="{% static 'images/logo_dark.png' %}" 
                        alt="Hakez Labs Logo" 
                        class="h-auto w-40 object-contain hidden dark:block" />

            </div>

            <nav class="hidden md:flex items-center gap-8">
                <a href="{% url 'index' %}" class="text-sm font-medium text-primary dark:text-primary">Home</a>
                <a href="{% url 'about' %}" class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors">About</a>
                <a href="{% url 'contact'%}" class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors">Contact</a>
            </nav>

            <div class="flex items-center gap-4">
                <button id="theme-toggle" type="button"
                    class="p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-background-dark transition-colors">
                
                    <!-- Light mode icon (sun) -->
                    <i id="theme-toggle-light-icon" class="hidden fa-solid fa-sun w-5 h-5 dark:block"></i>
                
                    <!-- Dark mode icon (moon) -->
                    <i id="theme-toggle-dark-icon" class="fa-solid fa-moon w-5 h-5 dark:hidden"></i>
                </button>

                <button id="mobile-menu-button" type="button"
                    class="p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-background-dark md:hidden transition-colors"
                    aria-controls="mobile-menu" aria-expanded="false">
                    <i id="menu-icon-open" class="fa-solid fa-bars text-2xl block"></i>
                    <i id="menu-icon-close" class="fa-solid fa-xmark text-2xl hidden"></i>
                </button>

            </div>
        </div>
    </div>
</header>

<div id="mobile-menu" 
     class="hidden md:hidden 
            fixed top-16 right-0 z-40  /* Positioning: Fixed below the 4rem (h-16) header */
            h-full                       /* Height: Takes up the remaining viewport height */
            w-40                       /* Width: Takes up full viewport width */
            overflow-y-auto              /* Allows scrolling if links exceed screen height */
            bg-background-light dark:bg-background-dark 
            shadow-xl transition-transform duration-300 ease-in-out">
    
    <div class="px-4 py-4 space-y-1">
        
        <a href="{% url 'index' %}" 
           class="block w-full text-left px-4 py-2 rounded-lg text-base font-semibold transition-colors duration-150 
                  bg-primary/10 dark:bg-primary/20 text-primary dark:text-white">
            Home
        </a>
        
        <a href="{% url 'about' %}" 
           class="block w-full text-left px-4 py-2 rounded-lg text-base font-medium transition-colors duration-150 
                  text-gray-700 dark:text-gray-300 hover:bg-primary/10 hover:text-primary dark:hover:bg-primary/20 dark:hover:text-white">
            About
        </a>
        
        <a href="{% url 'contact' %}" 
           class="block w-full text-left px-4 py-2 rounded-lg text-base font-medium transition-colors duration-150 
                  text-gray-700 dark:text-gray-300 hover:bg-primary/10 hover:text-primary dark:hover:bg-primary/20 dark:hover:text-white">
            Contact
        </a>
        
    </div>
</div>

{% if messages %}
<div id="toast-container" class="fixed top-5 right-5 z-50 space-y-2">
  {% for message in messages %}
    <div
      class="toast-message px-4 py-3 rounded-lg shadow-lg text-white transition-opacity duration-700 ease-in-out
      {% if message.tags == 'error' %}bg-red-600{% elif message.tags == 'success' %}bg-green-600{% elif message.tags == 'warning' %}bg-yellow-500{% else %}bg-blue-600{% endif %}">
      {{ message }}
    </div>
  {% endfor %}
</div>

<script>
  // Wait for the DOM to load
  document.addEventListener("DOMContentLoaded", () => {
    const toasts = document.querySelectorAll(".toast-message");

    // Delay before fade out
    toasts.forEach((toast, index) => {
      setTimeout(() => {
        toast.style.opacity = "0"; // fade out
        
        setTimeout(() => toast.remove(), 500); 
      }, 3000 + index * 300); // staggered timing
    });
  });
</script>
{% endif %}


<main class="flex flex-col min-h-screen">
    {% block content %}
    <!-- Default content here -->
    {% endblock %}
</main>


<footer>
    {% block footer %}
    <footer class="bg-white dark:bg-gray-800 border-t border-primary/20 dark:border-primary/30 mt-16">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col md:flex-row items-center justify-between text-center md:text-left">
            
            <div class="text-sm text-gray-600 dark:text-gray-400 order-2 md:order-1 mt-4 md:mt-0">
                &copy; <span id="current-year"></span> Hakez Labs File Converter. All rights reserved.
            </div>

            <div class="text-sm font-medium text-gray-700 dark:text-gray-300 order-1 md:order-2">
                Created by 
                <a href="https://adityamaharjan.com.np/"><span class="text-primary font-bold">Aditya Maharjan</span> </a>
                &amp; 
                <a href="https://maharjan-sajan.com.np/"><span class="text-primary font-bold">Sajan Maharjan</span> </a>
              </div>
            
        </div>
    </div>
</footer>
    {% endblock %}
</footer>

<script>
    const html = document.documentElement;
    const themeToggleBtn = document.getElementById('theme-toggle');

    function applyTheme(theme){
        if (theme==="dark"){
            html.classList.add('dark')
        }else {
            html.classList.remove('dark')
        }
        localStorage.setItem("theme", theme);
    }
    themeToggleBtn.addEventListener('click', ()=> {
        const newTheme = html.classList.contains("dark")? "light" : "dark";
        applyTheme(newTheme);
    });

    // When page loads
    const savedTheme = localStorage.getItem("theme") ||
    (window.matchMedia("(prefers-color-scheme: dark)").matches? "dark":"light");
    
    applyTheme(savedTheme);

    // 2. Mobile Menu Toggle
    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIconOpen = document.getElementById('menu-icon-open');
    const menuIconClose = document.getElementById('menu-icon-close');

    menuButton.addEventListener('click', function () {
        const isExpanded = menuButton.getAttribute('aria-expanded') === 'true' || false;
        menuButton.setAttribute('aria-expanded', !isExpanded);
        
        // Toggle visibility of the mobile menu
        mobileMenu.classList.toggle('hidden');

        // Toggle the icons
        menuIconOpen.classList.toggle('hidden');
        menuIconClose.classList.toggle('hidden');
    });
</script>
</body>
</html>
